
#1..n yml file names

echo pub
#one case was rpm was failure but said ok from previous
sleep 10

for var in "$@"
do
	while true
	do
		#head will break tabs, and echo same
		status1=`gh run list --workflow=${var}.yml -b $(git rev-parse --abbrev-ref HEAD) | cut -f1 | head -1`
		echo ${status1}, ${var}
		if [ "${status1}" = "completed" ]; then
			#&&
			while true
			do
				status2=`~/test/slow gh run list --workflow=${var}.yml -b $(git rev-parse --abbrev-ref HEAD) | cut -f2 | head -1`
				if [ "${status2}" = "" ]; then
					echo status not ready
					continue
				fi
				break
			done
			echo "${status2}, ${var}"
			if [ "${status2}" = "success" ]; then
				break
			fi
			exit 1
		fi
		echo sleep
		sleep 60
	done
done
exit 0
