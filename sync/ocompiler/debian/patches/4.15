Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 ocompiler (1-4.15) bionic; urgency=medium
 .
   * fix const counter
Author: bc <bc@bc-HP-Pavilion-x360-Convertible>

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: 2022-01-11

--- ocompiler-1.orig/srcres/uconstres.s
+++ ocompiler-1/srcres/uconstres.s
@@ -33,7 +33,7 @@ function uconstres_spin(sd f,sd is_new)
 		set size f#
 		if size!=0
 			sub f :
-			call uconst_resolved(1,f#v^,size)
+			call uconst_resolved(1,size)
 			neg size
 			call ralloc(f,size)
 		endif
@@ -81,17 +81,13 @@ function uconst_resolve(ss const_str)
 	endwhile
 endfunction
 
-function uconst_resolved(sd t,sd mem,sd size)
+function uconst_resolved(sd t,sd size)
 	data nr#1
 	if t==0
 		set nr 0
 	elseif t==1
-		add size mem
-		while mem!=size
-			add mem mem#
-			add mem (dword)
-			inc nr
-		endwhile
+		div size (dword)
+		add nr size
 	else
 		return nr
 	endelse
