Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 actionswf (1-60) bionic; urgency=medium
 .
   * counting was wrong there
Author: bc <bc@bc-HP-Pavilion-x360-Convertible>

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: 2022-12-12

--- actionswf-1.orig/src/actionutil.s
+++ actionswf-1/src/actionutil.s
@@ -82,24 +82,22 @@ function escape_count(ss string,sd escap
     sd escaped=0
     while string#!=0
         if string#==escape
-            if escaped==0
-                #
-                ss double_test
-                set double_test string
-                inc double_test
-                chars l="l";chars f="f";
-                if double_test#==l
-                    inc double_test
-                    if double_test#==f
-                        inc nr
-                    endif
-                endif
-                #
-                inc nr
-            endif
             xor escaped 1
         elseif escaped==1
+		inc nr
             set escaped 0
+
+		#this is not working nowadays, printf is searching for floats on xmm registers, kept as legacy
+		chars l="l"
+		if string#==l
+			chars f="f";
+			ss double_test=1
+			add double_test string
+			if double_test#==f
+				inc nr
+			endif
+		endif
+
         endelseif
         inc string
     endwhile
