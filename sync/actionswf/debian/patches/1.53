Description: <short summary of the patch>
 TODO: Put a short summary on the line above and replace this paragraph
 with a longer explanation of this change. Complete the meta-information
 with other relevant fields (see below for details). To make it easier, the
 information below has been extracted from the changelog. Adjust it or drop
 it.
 .
 actionswf (1-53) bionic; urgency=medium
 .
   * some 64 migrations
Author: bc <bc@bc-HP-Pavilion-x360-Convertible>

---
The information above should follow the Patch Tagging Guidelines, please
checkout http://dep.debian.net/deps/dep3/ to learn about the format. Here
are templates for supplementary fields that you might want to add:

Origin: <vendor|upstream|other>, <url of original patch>
Bug: <url in upstream bugtracker>
Bug-Debian: https://bugs.debian.org/<bugnumber>
Bug-Ubuntu: https://launchpad.net/bugs/<bugnumber>
Forwarded: <no|not-needed|url proving that it has been forwarded>
Reviewed-By: <name and email of someone who approved the patch>
Last-Update: 2022-11-08

--- actionswf-1.orig/src/Makefile
+++ actionswf-1/src/Makefile
@@ -33,6 +33,7 @@ xname = lib${name}
 defname = ${projname}.def
 items_prefix=
 prefname=${items_prefix}${name}
+stripname=${debugstrip}${name}
 
 $(eval obs = )
 $(eval eobs = )
@@ -62,7 +63,7 @@ ${name}:
 	$(foreach var,$(items),$(eval strp += ${items_prefix}${var}.s.log ${items_prefix}${var}.o))
 	ostrip ${name} ${strp}
 	#if [ ! -e "./strip.py" ]; then wget https://raw.githubusercontent.com/colin-i/o/master/ostrip/strip.py; fi
-	${strippy} ${name} ${debugstrip}${name}
+	${strippy} ${name} ${stripname}
 endif
 
 %.o: %.s
@@ -104,6 +105,7 @@ clean:
 	-printf ' %s.es.log' ${expitems} | xargs rm -f
 	-printf ' %s.o' ${items} ${expitems} | xargs rm -f
 	-rm -f ${exte}
+	-rm -f ${stripname}
 	-rm -f ${name}
 	-rm -f ${projname}.dll
 	-rm -f ${defname}
@@ -134,4 +136,4 @@ uninstall:
 #make syms= conv_64=0
 #make syms= conv_64=0 link
 
-#make debugstrip=_ strippy="python /home/bc/Desktop/ostriputil/ostriputil-1/ostriputil/main.py"
+#make debugstrip=lib strippy="python /home/bc/Desktop/ostriputil/ostriputil-1/ostriputil/main.py"
--- actionswf-1.orig/src/bits.s
+++ actionswf-1/src/bits.s
@@ -128,6 +128,8 @@ function matrix_translate(sv p_dest,sd p
         #to bytes
         add size 7
         div size 8
+
+	#this is no more than chars matrix
     set p_size# size
 endfunction
 
--- actionswf-1.orig/src/character.s
+++ actionswf-1/src/character.s
@@ -82,7 +82,7 @@ function edittext_layout(sd in_args)
     add s (DWORD);add in_args (DWORD);set s# in_args#
 endfunction
 function edittext_text(ss text)
-    sd s
+    sv s
     setcall s edittext_struct()
     add s (5*DWORD+sim64pointerSize)
     set s# text
@@ -393,6 +393,7 @@ function swf_button_base(sd state_def_id
     call swf_mem_add(#TrackAsMenu,(BYTE))
     sd ActionOffset=2;add ActionOffset Characters_CharacterEndFlag_size
     call swf_mem_add(#ActionOffset,(WORD))
+
     call buttonrecord(1,0,0,(ButtonStateUp),state_def_id,1)
     call buttonrecord(1,0,0,(ButtonStateOver),state_over_id,2)
 	call buttonrecord(1,0,0,(ButtonStateDown|ButtonStateHitTest),state_down_id,3)
@@ -428,7 +429,7 @@ function buttonrecord(sd writeflag,sd x,
 
     #PlaceMatrix
     sd matrix
-    sd maxtrixsz
+    datax maxtrixsz#1
     call matrix_translate(#matrix,#maxtrixsz,x,y)
     if writeflag==1
         call swf_mem_add(matrix,maxtrixsz)
--- actionswf-1.orig/src/swf.es
+++ actionswf-1/src/swf.es
@@ -64,11 +64,11 @@ data dn_line#1;#no pad
 data xcurve#1
 data ycurve#1;#no pad
 
-str text#:/DWORD
+vstr text#1
 data font_id#1;data font_height#1;#no pad
 data font_vertical_offset#1;data font_color#1;#no pad
 
-str actions#:/DWORD
+vstr actions#1
 
 #width                  is the button width
 #height                 is the button height
@@ -233,12 +233,12 @@ endfunction
 #text
 
 #id
-functionX swf_text(sd bound_width,sd bound_height,ss variablename,sd flags,sd structure)
+functionX swf_text(sd bound_width,sd bound_height,ss variablename,sd flags,sv structure)
 #sd bound_width  width of the text
 #sd bound_height height
 #ss variablename to change it with actionscript
 #sd flags        see include/text.h
-#sd structure    see edittext_struct()  from character.s, set the flags first
+#sv structure    see edittext_struct()  from character.s, set the flags first
     #CharacterID
     sd size=2
     #RECT
@@ -791,7 +791,7 @@ const PlaceFlagHasCharacter=0x2
 #const PlaceFlagMove=0x1
     sd flags=PlaceFlagHasMatrix|PlaceFlagHasCharacter
     sd matrix
-    sd maxtrixsz
+    datax maxtrixsz#1
     call matrix_translate(#matrix,#maxtrixsz,x,y)
 
     sd size=5
