
#1 requirements/service

if [ -z "${1}" ]; then
	sudo apt install python3-rpi.gpio && \
	sudo pip3 install fanshim  --break-system-packages
else
	#rpi3       rpi4
	#off=39=$1  50
	#low=41=$2  54
	#high=42=$3 56
	#on=44=$4   60
	#b=0-255=$5

	off=${1}
	low=${2}
	high=${3}
	on=${4}

	#automatic.py is at https://github.com/pimoroni/fanshim-python /examples (make install is not working from the first try now)
	#long press the button(blue blinking) to switch from manual(same button short press) or auto (high red, green low)
	cd ~/fanshim-python/examples

	#sudo, else root warning
	sudo ./install-service.sh --brightness $5 --delay 5 --on-threshold ${on} --off-threshold ${off} --low-temp ${low} --high-temp ${high}

	cat /sys/class/thermal/thermal_zone*/temp
fi

# vcgencmd measure_temp
