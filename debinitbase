
#1 msg               optional 2 distribution

if [ "$#" -lt "1" ]; then
 echo at least message argument
 exit -1
fi

major=1
version=`cat debian/changelog | head -1 | grep -o -e "[^-]*)"`
version=${version::-1}
if [ -z "${2}" ]; then
 dist=`cat debian/changelog | head -1 | grep -o -e "[^ ]*;"`
 dist=${dist::-1}
else
 dist=${2}
fi

echo version=${version} - is on clipboard. paste, modify, enter
echo -n "${version}" | xclip -selection clipboard
read -r version
msg=${1}
echo -n "${msg}" | xclip -selection clipboard && \
dch -v ${major}-${version} --distribution=${dist} && \
# "${msg}"
# --create --package "pkgpkg" --newversion 0.0.0.0-0.test
echo -n ${major}.${version} | xclip -selection clipboard && \
dpkg-source --commit --include-removal && \
#EDITOR=/bin/true dpkg-source -q --commit --include-removal . patchsetname
git add .pc/${major}.${version}/ && \
git add debian/patches/${major}.${version}

#here was the push

#gh workflow run deb.yml --ref `git rev-parse --abbrev-ref HEAD`

#gh run list --workflow=deb.yml
#gh run view [nr]
#gh run view [nr] --log-failed
#gh run view --job=[nr]
#gh run view --log --job=[nr]

#tar gz without ln first time
#debmake -b':py3' -e costin.botescu@gmail.com -f 'Botescu Costin'
#debmake -e costin.botescu@gmail.com -f 'Botescu Costin'
#changelog
#control: section, build-depends compat 11 for old bionic, homepage, architecture, description
#at rules uncomment prefix usr, (if it is required: --with autoreconf)
